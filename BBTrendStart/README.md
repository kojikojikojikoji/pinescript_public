# BB TrendStart Strategy

このリポジトリには、TradingViewのPine Script (v6) で作成された **BB TrendStart Strategy** が含まれています。  
ボリンジャーバンド、短期・長期EMAによるトレンド判定、RSIフィルター、そして出来高を用いたエグジット条件を組み合わせることで、新たなトレンドの始まりを検出し、トレードを管理します。

## 概要

- **ボリンジャーバンド (BB)**
  - 比較的短い期間（デフォルト：10）と、小さめの標準偏差乗数（デフォルト：0.8）を使用
  - 価格が下限BBを下回ってから再度上にクロスすることで、反発（売られすぎ）を示唆

- **EMAによるトレンド判定**
  - 短期EMA（デフォルト：9）が長期EMA（デフォルト：21）を上抜けすると、**上昇トレンド**が進行中とみなす
  - スクリプトは `shortMa > longMa` をチェックし、新規エントリーがまだ有効かどうかを確認

- **RSIフィルター**
  - RSI（デフォルト期間：5）が `rsiLimit`（デフォルト：55）より低い場合のみエントリーを許可  
    （買われすぎを回避するため）

- **損切り & 利確**
  - 損切り（デフォルト：0.5%）
  - 利確（デフォルト：2.5%）
  - いずれもポジションの平均価格を基準として設定
  - スクリプトの入力パラメータから簡単にカスタマイズ可能

- **ネガティブ・ボリューム比率によるエグジット**
  - カスタム関数 `f_sum()` を使い、前のバーより安く終値をつけたバー（`negVol`）の出来高を合計
  - これを、過去 `volLookback` 本のバーでの総出来高と比較
  - `negVolRatio` が `volumeExitLimit`（デフォルト：50%）を超えた場合は、売り圧力が高まったと判断してポジションを即クローズ

## スクリプトのパラメータ (Inputs)

| パラメータ            | デフォルト | 説明                                                  |
|-----------------------|------------|-------------------------------------------------------|
| **BB期間**           | 10         | ボリンジャーバンドの期間                             |
| **BB乗数(σ)**        | 0.8        | 標準偏差の乗数                                       |
| **RSI期間**          | 5          | RSIの計算に用いる期間                                 |
| **RSI上限**          | 55         | エントリーを許可する最大RSI値（買われすぎ防止）      |
| **短期EMA**          | 9          | トレンド判定用の短期EMA                               |
| **中期EMA**          | 21         | トレンド判定用の中期EMA                               |
| **損切り(%)**        | 0.5        | 損切りライン（%）                                     |
| **利確(%)**          | 2.5        | 利確ライン（%）                                       |
| **出来高計算期間**   | 14         | ネガティブ・ボリュームの集計対象バー数               |
| **売り圧力(%)閾値**  | 50         | この割合を超えると強い売り圧力とみなし即決済         |

## 使い方

1. **コピー＆ペースト**  
   - TradingViewを開き、Pine Editorへ移動して、このスクリプトを貼り付けます。  
2. **チャートに追加**  
   - スクリプトを保存した後、「チャートに追加（Add to Chart）」をクリックして適用します。  
3. **パラメータの調整**  
   - チャート上で当ストラテジーの「設定」を開き、期間・RSIの上限・損切り/利確の割合などを調整できます。  
4. **バックテスト**  
   - TradingViewの「Strategy Tester」を使い、さまざまな時間足や銘柄でパフォーマンスを検証できます。

## 注意事項

- 本ストラテジーは**ロング専用**で、初期の上昇トレンドや押し目エントリーを捉えることを目的としています。  
- デフォルトのパラメータはあくまで**一例**であり、実際のパフォーマンスは市場・時間足・銘柄によって大きく変動します。  
- ボリンジャーバンドやEMAの期間を変更すると、トレード回数や損益に大きな影響を与える可能性があります。

## 免責事項

本ストラテジーは**教育目的**および**情報提供**を目的として公開しているものであり、金融商品の取引を推奨するものではありません。  
トレードには大きなリスクが伴い、投資や取引の最終的な判断はご自身の責任で行ってください。  
本ストラテジーの使用によって生じたいかなる損失や損害についても、作成者は一切の責任を負いません。
